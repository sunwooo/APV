<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="Cache-Control" content="no-cache" />
	<meta http-equiv="Pragma" content="no-cache" />
	<title></title>	
	<link rel="stylesheet" href="/GWImages/common/css/approval_form.css" type="text/css" />
    <style type="text/css">
        a.a1 {color:DarkOrange; text-decoration:underline}
    </style>
    <!--필수 양식파일에 쓰이는 js 파일-->
	<script type="text/javascript" language="javascript" src="/CoviWeb/SiteReference/js/Config.js" ></script>
    <script type="text/javascript" language="javascript" src="/CoviWeb/SiteReference/js/EmbedObject.js" ></script>
    <script type="text/javascript" language="javascript" src="/CoviWeb/SiteReference/js/Utility.js" ></script>
    <script type="text/javascript" language="javascript" src="../../Common/script/COVIFlowNet/openWindow.js" ></script>		
	<script type="text/javascript" language="javascript" src="../../Common/script/progress.js" ></script>
	<script type="text/javascript" language="javascript" src="../../common/script/NameControl.js"></script>
	<script type="text/javascript" language="javascript" src="../../common/script/jquery-1.6.1.min.js"></script>
	<script type="text/javascript" language="javascript" src="formedit.js" ></script>
	<script type="text/javascript" language="javascript" src="formedit_apvlinemgr.js" ></script>
    <!-- 캘린더 관련 시작 -->
    <link rel="stylesheet" href="/CoviWeb/SiteReference/Jcalendar/themes/base/jquery.ui.all.css"/>
    <script type="text/javascript" language="javascript"  src="/CoviWeb/SiteReference/Jcalendar/jquery-1.8.2.js"></script>
    <script type="text/javascript" language="javascript"  src="/CoviWeb/SiteReference/Jcalendar/JqueryDatePicker.js"></script>
    <script type="text/javascript" language="javascript"  src="/CoviWeb/SiteReference/Jcalendar/ui/jquery.ui.core.js"></script>
    <script type="text/javascript" language="javascript"  src="/CoviWeb/SiteReference/Jcalendar/ui/jquery.ui.datepicker.js"></script>
    <!-- 캘린더 관련 종료 -->
</head>

<body topmargin="0" leftmargin="0" style="OVERFLOW: auto; overflow-x: hidden;">
<!-- COMMON FIELDS -->
<input type="hidden" id="dField" name="INITIATOR_NAME" dataFld="usdn" />
<input type="hidden" id="dField" name="INITIATOR_ID" dataFld="usid" />
<input type="hidden" id="dField" name="INITIATOR_OU_NAME" dataFld="dpdn_apv" />
<input type="hidden" id="dField" name="INITIATOR_OU_ID" dataFld="dpid_apv" />
<input type="hidden" id="cField" name="LAST_MODIFIER_ID" /> 
<input type="hidden" id="cField" name="attach" />
<input type="hidden" id="cField" name="filelocation" dataFld="fmfl" />
<input type="hidden" id="cField" name="ATTACH_FILE" value="" />
<input type="hidden" id="dField" name="ATTACH_FILE_INFO" value="" dataFld="ATTACH_FILE_INFO" />
<input type="hidden" id="dField" name="INITIATOR_INFO" value="" dataFld="INITIATOR_INFO" />
<input type="hidden" id="dField" name="APPLIED" dataFld="APPLIED" />										
<input type="hidden" id="dField" name="ISPUBLIC" dataFld="ISPUBLIC" />
<input type="hidden" id="dField" name="APPLIED_TERM" dataFld="APPLIED_TERM" />
<input type="hidden" id="dField" name="RECEIVE_NO" dataFld="RECEIVE_NO" />
<input type="hidden" id="dField" name="RECEIVE_NAMES" dataFld="RECEIVE_NAMES" />
<input type="hidden" id="dField" name="RECEIPT_LIST" dataFld="RECEIPT_LIST" />
<!--<input type="hidden" id="dField" name="DOC_LEVEL"  dataFld="DOC_LEVEL">
<input type="hidden" id="dField" name="SAVE_TERM"  dataFld="SAVE_TERM">-->
<input type="hidden" id="dField" name="DOC_CLASS_ID" dataFld="DOC_CLASS_ID" />
<!--<input type="hidden" id="dField" name="SUBJECT" dataFld="SUBJECT" />-->
<input type="hidden" id="dField" name="DOC_NO" dataFld="DOC_NO" />
<input type="hidden" id="dField" name="DOC_OU_NAME" dataFld="dpdsn" />
<input type="hidden" id="dField" name="ENT_CODE" dataFld="etid" />
<input type="hidden" id="dField" name="ENT_NAME" dataFld="etnm" />
<input type="hidden" id="mField" name="DOC_LEVEL_NAME" />

<textarea  id="dField" name="DOC_SUMMARY" dataFld="DOC_SUMMARY" style="display:none"></textarea>
<textarea id="dhtml_body" style="display:none"></textarea>
<textarea style="display:none" id="cField" name="xsl"></textarea> 

<!-- 문서link 2006.01 -->
<textarea id="dField" name="DOCLINKS" style="display:none"  dataFld="DOCLINKS"></textarea>
<!-- 반송문서 추가 시작 2007.11-->
<textarea id="mField" name="REJECTDOCLINKS" style="display:none"></textarea>
<!-- 반송문서 추가 끝 2007.11-->
<!-- 결재선 관리 UI 변경 2008.01 -->
<textarea style="display:none;" id="cField" name="APVLIST"></textarea> 
<!-- 결재선 관리 UI 변경 끝 2008.01 -->
<!-- process 메뉴얼 추가 2008.01 -->
<textarea id="mField" name="PMLINKS" style="display:none"></textarea>
<!-- process 메뉴얼 추가 2008.01 -->
<!-- END -->

<!-- 양식전체본문 -->
<div id="bodytable">
    <!-- header start -->
    <div class="draft_tit"><h4><span id="headname"></span><a href="#"><span class="drop_menu"></span></a></h4></div>
    <div class="draft_page">

        <!--######## 양식상단부분 공통 시작 #################################-->
        <table class="table_2" summary="문서분류" cellpadding="0" cellspacing="0">
            <tr style="display:none;">
                <th>보안등급</th>
                <td><select id="dField" name="DOC_LEVEL" onchange="DOC_LEVEL_Change(this);"></select></td>	
                <th>문서번호</th><td width="100px"></td>		
            </tr>
            <tr>
                <!--<td style="width:46px; font-weight:bold; background-color:#F6F6F6">문서분류</td>-->
                 <td rowspan="2" align="center" style="height:30px;width:50px; font-weight:bold; background-color:#F6F6F6">문서분류</td>
                <td>
                    <input type="text" id="dField" name="DOC_CLASS_NAME" dataFld="DOC_CLASS_NAME" size="20" readonly="readonly" style="width:70%; width:70%; height:20px;" />&nbsp;
                    <img src="/GWImages/Common/btn/btn_organization.gif" name="btn_Process" id="btn_Process" align="absMiddle" border="0" onClick="OpenDocClass();" style="cursor:hand" />
                </td>	
                <td rowspan="2" align="center" style="height:30px;width:50px; font-weight:bold; background-color:#F6F6F6">보존년한</td>
                <td colspan="3"><select id="dField" name="SAVE_TERM"></select></td>		
            </tr>
        </table>	
        <!-- header end -->
        <!-- bodycontext start -->		
        <table class="table_3" summary="제목" cellpadding="0" cellspacing="0">
            <tr>
                <!--<th>제&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;목<span class="txt_red">*</span></th>-->
                <td align="center" style="height:30px;width:50px; font-weight:bold; background-color:#F6F6F6">제목<span class="txt_red">*</span></td>
                
                <td colspan="5"><input id="dField" name="SUBJECT" datafld="SUBJECT" onkeyup="SetSubjectTbxSync();" style="width:100%; height:20px;" /></td>	
            </tr>
            <tr>
                <!--<th>발&nbsp;신&nbsp;</th>-->
                <td align="center" style="font-weight:bold; background-color:#F6F6F6">발신&nbsp;</td>
                <td><input id="mField" name="txtSender" datafld="SUBJECT" style="width:95%; height:20px;" /></td>	
                <!--<th>수&nbsp;신</th>-->
                <td align="center" style="height:30px;width:50px; font-weight:bold; background-color:#F6F6F6">수신</td>
                <td><input id="mField" name="txtReceiver" datafld="SUBJECT" style="width:100%; height:20px;" /></td>	
            </tr>
        </table>
        <!--######## 양식상단부분 공통 종료 #################################-->
        
        <!--######## 본문부분 시작 #########################################-->
        <div id="divBodyContent">  <!--추가(인쇄용) HIW-->
        <table border="0" width="100%">
            <tr>
                <td align="center" style="padding-top:15px; padding-bottom:15px;">다음과 같이 휴가변경신청서를 제출하오니 휴가 변경을  승인하여 주시기 바랍니다.</td>
            </tr>
        </table>
        
      <table class="table_html" id="tblBodyContent" summary="내용" cellpadding="0" cellspacing="0">
        <tr > 
          <td rowspan="2" align="center" style="height:30px;width:70px; font-weight:bold; background-color:#F6F6F6">신청자</td>
          <td align="center" style="height:25px;width:100px; font-weight:bold; background-color:#F6F6F6">사원번호</td>
          <td align="center" style="height:25px;width:160px; font-weight:bold; background-color:#F6F6F6">성명</td>
          <td align="center" style="height:25px;width:80px; font-weight:bold; background-color:#F6F6F6">직위</td>
          <td align="center" style="height:25px;width:200px; font-weight:bold; background-color:#F6F6F6">소속</td>
        </tr>
        <tr> 
          <td height="47" align="center" style="height:30px;"><input type="text" id="mField" name="txtSabun" readonly="readonly" style="height:20px;width:90%; text-align:center; BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px" /></td>
          <td align="center"><input type="text" id="mField" name="txtUserName" readonly="readonly" style="height:20px;width:70%; text-align:center; BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px" /> 
            &nbsp;<img src="/GwImages/BLUE/common/devs/btn_search.gif" onclick="SearchUserFromHR();" style="cursor:hand;" /></td>
          <td align="center"><input type="text" id="mField" name="txtJobPosition" readonly="readonly" style="height:20px;width:90%; text-align:center; BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px" /></td>
          <td align="center"><input type="text" id="mField" name="txtUnitName" readonly="readonly" style="height:20px;width:90%; text-align:center; BORDER-RIGHT: 0px; BORDER-TOP: 0px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px" /></td>
        </tr>
      </table>
      <table cellpadding="0" cellspacing="0" class="table_html" >
        <tr> 
          <td rowspan="2" align="center" style="height:30px;width:98px; font-weight:bold; background-color:#F6F6F6">휴가 
            취소일 
            <input type="hidden" id="mField" name="hdn_cancel_vaca_day" />
            <input type="hidden" id="mField" name="hdn_cancel_vaca_day_key" />
            <input type="hidden" id="mField" name= "hdn_cancel_tcnt" />
            </td>
          <td id="td_vaca_day" rowspan="2" align="left" style="height:30px;width:600px;"></td>
          <td align="center" valign="middle" style="height:30px;width:153px; font-weight:bold; background-color:#F6F6F6">취소 
            일수 </td>
        </tr>
        <tr>
          <td align="center" style="height:30px;width:150px; font-weight:bold;" id="cancel_tcnt">0</td>
        </tr>
      </table>  
      <table cellpadding="0" cellspacing="0" class="table_html">
        <tr> 
          <td rowspan="12" align="center" style="height:30px;width:82px; font-weight:bold; background-color:#F6F6F6">변경 
            요청일</td>
          <td align="center" style="height:30px;width:190px; font-weight:bold; background-color:#F6F6F6">구분</td>
          <td align="center" style="height:30px;font-weight:bold; background-color:#F6F6F6">일자</td>
          <td align="center" style="height:30px;width:127px; font-weight:bold; background-color:#F6F6F6">적용 
            일수</td>
        </tr>

        <tr> 
          <td align="center" style="height:30px; font-weight:bold;"><select id="mField" name="cmbGoobun1" onchange="ChangeGoobunCombo(this);">
              <option value="선택하세요" selected>선택하세요</option>
            </select> <input type="hidden" id="mField" name="hdnGoobunVal1" /> 
            <input type="hidden" id="mField" name="hdnGoobunText1" /></td>
          <td align="center" style="height:30px;font-weight:bold;"><input type="text" id="dpApprFormDTStart1" name="dpApprFormDTCheck" readonly="readonly" style="font-size: 9pt; padding-left: 3px; width: 70px;"/>
            &nbsp;<a class="a1" href="javascript:ResetRowData(1);">초기화</a><input type="hidden" id="mField" name="hdn_dpApprFormDTStart1" />
          </td>
          <td align="center" style="height:30px; font-weight:bold;"><input type="text" id="mField" name="txtApplyDay1" style="text-align: right;height:20px;width:50%"/>
            일</td>
        </tr>

        <tr> 
          <td align="center" style="height:30px; font-weight:bold;"><select id="mField" name="cmbGoobun2" onchange="ChangeGoobunCombo(this);">
              <option value="선택하세요" selected="selected">선택하세요</option>
            </select> <input type="hidden" id="mField" name="hdnGoobunVal2" /> 
            <input type="hidden" id="mField" name="hdnGoobunText2" /> </td>
          <td align="center" style="height:30px;font-weight:bold;"><input type="text" id="dpApprFormDTStart2" name="dpApprFormDTCheck" readonly="readonly" style="font-size: 9pt; padding-left: 3px; width: 70px;"/> 
            &nbsp;<a class="a1" href="javascript:ResetRowData(2);">초기화</a> <input type="hidden" id="mField" name="hdn_dpApprFormDTStart2" /> 
          </td>
          <td align="center" style="height:30px; font-weight:bold;"><input type="text" id="mField" name="txtApplyDay2" style="text-align: right;height:20px;width:50%"/>
            일</td>
        </tr>

        <tr> 
          <td align="center" style="height:30px; font-weight:bold;"><select id="mField" name="cmbGoobun3" onchange="ChangeGoobunCombo(this);">
              <option value="선택하세요" selected="selected">선택하세요</option>
            </select> <input type="hidden" id="mField" name="hdnGoobunVal3" /> 
            <input type="hidden" id="mField" name="hdnGoobunText3" /> </td>
          <td align="center" style="height:30px;font-weight:bold;"><input type="text" id="dpApprFormDTStart3" name="dpApprFormDTCheck" readonly="readonly" style="font-size: 9pt; padding-left: 3px; width: 70px;"/> 
            &nbsp;<a class="a1" href="javascript:ResetRowData(3);">초기화</a> <input type="hidden" id="mField" name="hdn_dpApprFormDTStart3" /> 
          </td>
          <td align="center" style="height:30px; font-weight:bold;"><input type="text" id="mField" name="txtApplyDay3" style="text-align: right;height:20px;width:50%"/>
            일</td>
        </tr>

        <tr> 
          <td align="center" style="height:30px; font-weight:bold;"><select id="mField" name="cmbGoobun4" onchange="ChangeGoobunCombo(this);">
              <option value="선택하세요" selected="selected">선택하세요</option>
            </select> <input type="hidden" id="mField" name="hdnGoobunVal4" /> 
            <input type="hidden" id="mField" name="hdnGoobunText4" /> </td>
          <td align="center" style="height:30px;font-weight:bold;"><input type="text" id="dpApprFormDTStart4" name="dpApprFormDTCheck" readonly="readonly" style="font-size: 9pt; padding-left: 3px; width: 70px;"/> 
            &nbsp;<a class="a1" href="javascript:ResetRowData(4);">초기화</a> <input type="hidden" id="mField" name="hdn_dpApprFormDTStart4" /> 
          </td>
          <td align="center" style="height:30px; font-weight:bold;"><input type="text" id="mField" name="txtApplyDay4" style="text-align: right;height:20px;width:50%"/>
            일</td>
        </tr>

        <tr> 
          <td align="center" style="height:30px; font-weight:bold;"><select id="mField" name="cmbGoobun5" onchange="ChangeGoobunCombo(this);">
              <option value="선택하세요" selected="selected">선택하세요</option>
            </select> <input type="hidden" id="mField" name="hdnGoobunVal5" /> 
            <input type="hidden" id="mField" name="hdnGoobunText5" /> </td>
          <td align="center" style="height:30px;font-weight:bold;"><input type="text" id="dpApprFormDTStart5" name="dpApprFormDTCheck" readonly="readonly" style="font-size: 9pt; padding-left: 3px; width: 70px;"/> 
            &nbsp;<a class="a1" href="javascript:ResetRowData(5);">초기화</a> <input type="hidden" id="mField" name="hdn_dpApprFormDTStart5" /> 
          </td>
          <td align="center" style="height:30px; font-weight:bold;"><input type="text" id="mField" name="txtApplyDay5" style="text-align: right;height:20px;width:50%"/>
            일</td>
        </tr>

        <tr> 
          <td align="center" style="height:30px; font-weight:bold;"><select id="mField" name="cmbGoobun6" onchange="ChangeGoobunCombo(this);">
              <option value="선택하세요" selected="selected">선택하세요</option>
            </select> <input type="hidden" id="mField" name="hdnGoobunVal6" /> 
            <input type="hidden" id="mField" name="hdnGoobunText6" /> </td>
          <td align="center" style="height:30px;font-weight:bold;"><input type="text" id="dpApprFormDTStart6" name="dpApprFormDTCheck" readonly="readonly" style="font-size: 9pt; padding-left: 3px; width: 70px;"/> 
            &nbsp;<a class="a1" href="javascript:ResetRowData(6);">초기화</a> <input type="hidden" id="mField" name="hdn_dpApprFormDTStart6" /> 
          </td>
          <td align="center" style="height:30px; font-weight:bold;"><input type="text" id="mField" name="txtApplyDay6" style="text-align: right;height:20px;width:50%"/>
            일</td>
        </tr>

        <tr> 
          <td align="center" style="height:30px; font-weight:bold;"><select id="mField" name="cmbGoobun7" onchange="ChangeGoobunCombo(this);">
              <option value="선택하세요" selected="selected">선택하세요</option>
            </select> <input type="hidden" id="mField" name="hdnGoobunVal7" /> 
            <input type="hidden" id="mField" name="hdnGoobunText7" /> </td>
          <td align="center" style="height:30px;font-weight:bold;"><input type="text" id="dpApprFormDTStart7" name="dpApprFormDTCheck" readonly="readonly" style="font-size: 9pt; padding-left: 3px; width: 70px;"/> 
            &nbsp;<a class="a1" href="javascript:ResetRowData(7);">초기화</a> <input type="hidden" id="mField" name="hdn_dpApprFormDTStart7" /> 
          </td>
          <td align="center" style="height:30px; font-weight:bold;"><input type="text" id="mField" name="txtApplyDay7" style="text-align: right;height:20px;width:50%"/>
            일</td>
        </tr>

        <tr> 
          <td align="center" style="height:30px; font-weight:bold;"><select id="mField" name="cmbGoobun8" onchange="ChangeGoobunCombo(this);">
              <option value="선택하세요" selected="selected">선택하세요</option>
            </select> <input type="hidden" id="mField" name="hdnGoobunVal8" /> 
            <input type="hidden" id="mField" name="hdnGoobunText8" /> </td>
          <td align="center" style="height:30px;font-weight:bold;"><input type="text" id="dpApprFormDTStart8" name="dpApprFormDTCheck" readonly="readonly" style="font-size: 9pt; padding-left: 3px; width: 70px;"/> 
            &nbsp;<a class="a1" href="javascript:ResetRowData(8);">초기화</a> <input type="hidden" id="mField" name="hdn_dpApprFormDTStart8" /> 
          </td>
          <td align="center" style="height:30px; font-weight:bold;"><input type="text" id="mField" name="txtApplyDay8" style="text-align: right;height:20px;width:50%"/>
            일</td>
        </tr>

        <tr> 
          <td align="center" style="height:30px; font-weight:bold;"><select id="mField" name="cmbGoobun9" onchange="ChangeGoobunCombo(this);">
              <option value="선택하세요" selected="selected">선택하세요</option>
            </select> <input type="hidden" id="mField" name="hdnGoobunVal9" /> 
            <input type="hidden" id="mField" name="hdnGoobunText9" /> </td>
          <td align="center" style="height:30px;font-weight:bold;"><input type="text" id="dpApprFormDTStart9" name="dpApprFormDTCheck" readonly="readonly" style="font-size: 9pt; padding-left: 3px; width: 70px;"/> 
            &nbsp;<a class="a1" href="javascript:ResetRowData(9);">초기화</a> <input type="hidden" id="mField" name="hdn_dpApprFormDTStart9" /> 
          </td>
          <td align="center" style="height:30px; font-weight:bold;"><input type="text" id="mField" name="txtApplyDay9" style="text-align: right;height:20px;width:50%"/>
            일</td>
        </tr>

        <tr> 
          <td align="center" style="height:30px; font-weight:bold;"><select id="mField" name="cmbGoobun10" onchange="ChangeGoobunCombo(this);">
              <option value="선택하세요" selected="selected">선택하세요</option>
            </select> <input type="hidden" id="mField" name="hdnGoobunVal10" /> 
            <input type="hidden" id="mField" name="hdnGoobunText10" /> </td>
          <td align="center" style="height:30px;font-weight:bold;"><input type="text" id="dpApprFormDTStart10" name="dpApprFormDTCheck" readonly="readonly" style="font-size: 9pt; padding-left: 3px; width: 70px;"/> 
            &nbsp;<a class="a1" href="javascript:ResetRowData(10);">초기화</a> <input type="hidden" id="mField" name="hdn_dpApprFormDTStart10" /> 
          </td>
          <td align="center" style="height:30px; font-weight:bold;"><input type="text" id="mField" name="txtApplyDay10" style="text-align: right;height:20px;width:50%"/>
            일</td>
        </tr>

        <tr> 
          <td colspan="2" align="right" style="height:30px;width:90px; font-weight:bold; background-color:#F6F6F6">변경 
            일수&nbsp;&nbsp;&nbsp; </td>
          <td align="center" style="height:30px;width:100px; font-weight:bold;"><input type="hidden" id="mField" name="sp_applyday_sum"/><span id="sp_applyday_sum">0</span></td>
        </tr>
      </table>
      <table cellpadding="0" cellspacing="0" class="table_html" >
        <tr> 
          <td align="left" style="height:30px;width:840px; font-weight:bold; background-color:#F6F6F6 ; padding-top:5px;padding-bottom:5px;padding-left:7px;padding-right:5px">변경 
            사유 </td>
        </tr>
        <tr>
          <td align="center" style="font-weight:bold;"><textarea id="mField" name="txtVacatReason" rows="6" cols="5" style="width:95%;height:90%"></textarea></td>
        </tr>
      </table>
    </div>
        <!--######## 본문부분 종료 ##########################################-->
		
		<!--######## 양식하단부분 공통 시작 #################################-->

        <div id="divApprovalLine"> <!--추가(인쇄용) HIW-->
            <table class="table_5" summary="참조" cellpadding="0" cellspacing="0">
                <tr>
                    <th>첨부파일</th>
                    <td id="AttFileInfo" align="left"></td>
                </tr>
                <tr>
                    <th>연결문서</th>
                    <td id="DocLinkInfo" align="left"></td>
                </tr>
                <tr style="display:none;">
                    <th>원 문 서</th>
                    <td id="RejectDocLinkInfo" align="left">-</td>
                </tr>
                <tr>
                    <th>참조</th>
                    <td  id="CCLine" align="left">
                        <div id="SendCC"></div>
                        <div id="RecCC"></div>&nbsp;
                    </td>
                </tr>
            </table>
        
            <!-- 결재선 정보 시작-->
            <table width="100%" cellpadding="0" cellspacing="0">
                <!-- 일반결재/합의 -->
                <tr>
                    <td style="height:7px;"></td>
                </tr>
                <tr>
                    <td id="AppLine" width="100%">
                        <table border="0" width="100%" height="100%" cellpadding="0" cellspacing="0" bordercolordark="white" bordercolorlight="gray">
                            <tr>
                            <!-- 발신처 결재란 보이는 부분(왼쪽) -->
                                <td id="LApvLine" align="left" width="100%"></td>
                            </tr>
                            <tr>
                            <!-- 수신처 결재란 보이는부분 (오른쪽)-->
                                <td id="RApvLine" align="left" width="100%"></td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <!-- 협조자 -->
                <tr>
                    <td id="AssistLine" width="100%" style="display:none;"></td>
                </tr>
                <!--참조자 -- 첨부파일 영역으로 옮김 -->
                <!--수신자 -->
                <tr>
                    <td id="RRLine" width="100%" style="display:none;"></td>
                </tr>		
            </table>
            <!-- 결재선 정보 종료-->

            <!--의견 시작-->
            <table id ="tbCommentView" border="0" cellpadding="0" cellspacing="0" align="center" width="100%">
                <tr>
                    <td align="center" id="tdCommentView"  width="100%" style="display:none;">				
                    </td>
                </tr>
            </table>
            <!--의견 종료-->
        </div>

        <!--문서설명 시작-->
        <div id="divforminfo" style="display:none">
        <table class="table_6" summary="원문서" cellpadding="0" cellspacing="0">
            <tr>
                <th>문서설명</th>
                <td id="tdforminfo"></td>
            </tr>
        </table>
        </div>
        <!--문서설명 종료-->

        <!--######## 양식하단부분 공통 종료 #################################-->

    </div>
    <!-- bodycontext end -->
</div>
<!-- 양식 전체 end -->
<script language="javascript" src="formedit_object.js" type="text/javascript"></script>

<script type="text/javascript" language="javascript">

   

    //캘린더 JdatePicker 선언 (HIW)
    $(function () {
        jDatePicker("dpApprFormDTStart1", "ko-KR"); // id, 다국어 정보(한국어: ko-KR)
        jDatePicker("dpApprFormDTStart2", "ko-KR"); // id, 다국어 정보(한국어: ko-KR)
        jDatePicker("dpApprFormDTStart3", "ko-KR"); // id, 다국어 정보(한국어: ko-KR)
        jDatePicker("dpApprFormDTStart4", "ko-KR"); // id, 다국어 정보(한국어: ko-KR)
        jDatePicker("dpApprFormDTStart5", "ko-KR"); // id, 다국어 정보(한국어: ko-KR)
        jDatePicker("dpApprFormDTStart6", "ko-KR"); // id, 다국어 정보(한국어: ko-KR)
        jDatePicker("dpApprFormDTStart7", "ko-KR"); // id, 다국어 정보(한국어: ko-KR)
        jDatePicker("dpApprFormDTStart8", "ko-KR"); // id, 다국어 정보(한국어: ko-KR)
        jDatePicker("dpApprFormDTStart9", "ko-KR"); // id, 다국어 정보(한국어: ko-KR)
        jDatePicker("dpApprFormDTStart10", "ko-KR"); // id, 다국어 정보(한국어: ko-KR)
    });

    window.onload = initOnload;
    function initOnload() {
        //alert(getInfo("etid"));
        initialize();

        if ($("input[name=txtSabun]").val() == "")   //기안시에만..(편집시에 로그인사용자정보로 엎어치지않게하기위함)
        {
            //사용자기본정보 셋팅
            SetUserBasicInfo();
        }



        //휴가구분 콤보박스 바인딩 (2012-12-07 HIW)
        GetVacatKind();

        //편집모드시 날짜필드 셋팅 (HIW)
        SetDateField();

        //편집모드시 콤보박스 셋팅 (HIW)
        SetComboBox();
        
        
        //휴가취소일  조회
        SetVacaDay();

        //문서 편집 시 체크박스 세팅
        setCancelCheck();
        //문서 편집 시 취소일수 세팅
        initCancelDay();
        //문서 편집 시 변경일수 세팅
        setApplyDaySum();
        /*
        if ($.trim($("#cancel_tcnt").text()) == "0" || $.trim($("#sp_applyday_sum").text()) == "0") {
            checkDays();
        }
        */
        //alert($("#cancel_tcnt").text());
        //alert($("#sp_applyday_sum").text());

        if ($.trim($("#cancel_tcnt").text()) != $.trim($("#sp_applyday_sum").text())) {
            checkDays();
        }
    }
    


    //문서 편집 시 체크박스 세팅
    function setCancelCheck() {
        var chkboxList = $("input[name=hdn_cancel_vaca_day_key]").val().split("^"); ;

        $("input[name=chk_vaca_day]").each(function (i) {
            for (i = 0; i < chkboxList.length - 1; i++) {
                if ($(this).val() == chkboxList[i]) {
                    $(this).attr("checked",true);
                    continue;
                }
            }
        });        
    }

    //문서 편집 시 취소일수 세팅
    function initCancelDay() {
        if ($("[name=hdn_cancel_tcnt]").val() != "") {
            //2015.11.13
            //$("#cancel_tcnt").text($("[name=hdn_cancel_tcnt]").val());
            ("#cancel_tcnt").text("0");
        }
    }
    
       //휴가종류구분 가져오기
    function SetVacaDay() {
		
		var spaceStr = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
		var spaceStr2 = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
		
        var url = "/CoviWeb/Approval/CallBack.aspx";
        var param = "CODE=00&ENT_CODE=" + getInfo("etid")+"&SABUN="+$("input[name=txtSabun]").val();

        var xml = DoCallback(url, param);
        var result = xml.responseXML;

        var elmRoot = result.documentElement;
        //debugger;
        if (SelectSingleNode(elmRoot, "result") != "SUCEESS") {
            alert("[Error]\n\r\n\r" + SelectSingleNode(elmRoot, "result"));
            return;
        }
        else {
            var vApplSeq = "";
            var vSYMD = "";
            var vGntNm = "";
            var vGntCd = "";
            var vCloseDay = "";
            var vVacaStr = "";
		
            try {
                $(elmRoot).find("Table").each(function (i) {

                    vApplSeq = $(this).find("APPL_SEQ").text();
                    vSYMD = $(this).find("DIS_S_YMD").text();
                    vGntNm = $(this).find("GNT_NM").text();
                    vGntCd = $(this).find("GNT_CD").text();
                    vCloseDay = $(this).find("CLOSE_DAY").text();
					
                    //if(i == 0) vVacaStr += spaceStr+"<input class=\"nonInput\" id=chk_vaca_day"+(i+1)+" type=\"checkbox\" name=\"chk_vaca_day\" value=\""+vApplSeq+":"+vSYMD+":오전반차\"/>"+vSYMD+"";
                    //else if(i == 1) vVacaStr += spaceStr+"<input class=\"nonInput\" id=chk_vaca_day"+(i+1)+" type=\"checkbox\" name=\"chk_vaca_day\" value=\""+vApplSeq+":"+vSYMD+":오후반차\"/>"+vSYMD+"";
                    //else
                    vVacaStr += spaceStr + "<input class=\"nonInput\" id=chk_vaca_day" + (i + 1) + " type=\"checkbox\" onClick=\"setCancelVacaDay(this)\" name=\"chk_vaca_day\" value=\"" + vApplSeq + ":" + vSYMD + ":" + vGntCd + ":" + vCloseDay + ":" + vGntNm + "\" />" + vSYMD + "(" + vGntNm + ")";

                    if ($(this).find("GNT_NM").text().indexOf("연차") > -1 || $(this).find("GNT_NM").text().indexOf("월차") > -1) vVacaStr = vVacaStr + spaceStr2;
					var loop = i+1;
					if(loop > 0 && (loop%3) == 0 ) vVacaStr += "<br>";

	            });

 				$("#td_vaca_day").html(vVacaStr);

 				$("#cancel_tcnt").html("0");  

                $("input:checkbox").click(function(){
        			setCancelDaySum(this);
        		});
        		               
            } catch (e) {
                alert(e.message);
            }
        }
        
    }

    function initialize() {
        if (window.parent.document.readyState == "complete") {
            window.parent.document.onreadystatechange = event_noop;
   
            initForm();
            initApvList();
        } else {
            window.setTimeout(initialize, 500);
        }				
    }

    function initForm(){
	    initFields();
	    G_displaySpnAttInfo(false);

        /*
	    //문서이관 여부에 따른 셋팅
	    if (getInfo("scEdmsLegacy")=="1"){
	        document.getElementById("trDocInfo01").style.display="";
	       // document.getElementById("trDocInfo02").style.display="";
	    }else{
	        document.getElementById("trDocInfo01").style.display="none";
	       // document.getElementById("trDocInfo02").style.display="none";
	    }
        */
    }

    function initFields(szBody){
        setFields((!window.ActiveXObject) ? document.getElementById("dField") : dField); //editable field
        setFields((!window.ActiveXObject) ? document.getElementById("cField") : cField); //readonly field
	    setFields((!window.ActiveXObject)?document.getElementById("mField"):mField);//form editable field

        document.getElementById("headname").innerHTML = initheadname(getInfo("fmnm"), true);
    	    if (getInfo("mode") == "DRAFT" || getInfo("mode") == "TEMPSAVE" ){		
		    document.getElementsByName("INITIATOR_INFO")[0].value = getInfo("usdn");//getInfo("dpdn_apv")+" "+getInfo("usdn") + " "+ getInfo("ustn") ;
		    document.getElementsByName("APPLIED").value = formatDate(getInfo("svdt"),"D");
		
	    }else{
		    document.getElementsByName("SUBJECT")[0].disabled = true
    }

        //기타 필드 채우기	
        setSaveTerm(); //보존년한 create	
        setDocLevel();  // 보안등급 create

        //본문 내용
        if (getInfo("BODY_CONTEXT") != undefined) {
            setBodyContext(getInfo("BODY_CONTEXT"));
        } else {
            setBodyContext(getInfo("fmbd").replace("euc-kr","utf-8"));
        }
    }


    function getBodyContext(){   
	    //UpdateImageData(); //이미지 업로드
	    var sBodyContext = makeBodyContext();
	    return makeNode("BODY_CONTEXT",sBodyContext,null,false);
    }

    function setFields(Fields){
        if(!window.ActiveXObject){
            var szId = Fields.id;
	        var unFiltered = document.getElementsByTagName('*');
	        for (i = 0; i < unFiltered.length; i++){
	            if (unFiltered[i].getAttribute('id') == szId){
                    var fld = unFiltered[i];
		            if(fld.getAttribute("dataFld")!=null){(getInfo(fld.getAttribute("name"))!=undefined)?fld.value=getInfo(fld.getAttribute("name")):(getInfo(fld.getAttribute("dataFld"))!=undefined)?fld.value=getInfo(fld.getAttribute("dataFld")):fld.value='';}
		            if (fld.getAttribute("name") != null){
		                if(fld.getAttribute("name") == 'POSITION' && getInfo(fld.getAttribute("name")) == ""){
			                fld.value = getInfo(fld.getAttribute("dataFld"));
		                }
		            }
	            }
	        }
       }else{
	        for(var i=0;i<Fields.length;i++){
		        var fld = Fields[i];
		        if(fld.dataFld!=""){(getInfo(fld.name)!=undefined)? fld.value=getInfo(fld.name):(getInfo(fld.dataFld)!=undefined)?fld.value=getInfo(fld.dataFld):fld.value='';}
		        if(fld.name == 'POSITION' && getInfo(fld.name) == ""){
			        fld.value = getInfo(fld.dataFld);
		        }
	        }
	    }

    }

    //[2014-07-21] PSW 취소일수와 변경일수 체크 함수
    function checkDays() {
        if ($.trim($("#cancel_tcnt").text()) != $.trim($("#sp_applyday_sum").text())) {
            alert('취소일수와 변경일수가 다릅니다.\n다시 확인하세요.');
            return false;
        }
    }

    function checkForm(bTempSave){
	    if (bTempSave){
		    return true;
		} else {//debugger;

		    if(document.getElementsByName("SUBJECT")[0].value == '' ){
			    alert('제목을 입력하세요.');
			    //SUBJECT.focus();
			    return false; 
			} else if (document.getElementsByName("DOC_CLASS_NAME")[0].value == '') {  //HIW
			    alert('문서분류를 선택하세요.');
			    return false;
			} else {
			    //=== HIW =============================
			    if ($("input[name=txtSabun]").val() == "") {
			        alert("신청자를 선택하지 않았습니다");
			        return false;
			    }
			    var vIsInputTerm = false;
			    $("[name=dpApprFormDTCheck]").each(function (i) {
			        if ($(this).val() != "") {
			            vIsInputTerm = true;
			        }
			    });
			    if (vIsInputTerm == false)
                {
                    alert("변경 요청일 입력되지 않았습니다");
			        return false;
			    }

			    if ($.trim($("#cancel_tcnt").text()) != $.trim($("#sp_applyday_sum").text())) {
			        alert('취소일수와 변경일수가 다릅니다.\n다시 확인하세요.');
			        return false;
			    }


			    if (document.getElementsByName("txtVacatReason")[0].value == '') {
			        alert('변경사유를 입력하세요.');
			        return false;
			    }
			    
                //======================================
			    return true;
			}
	    }
    }

    function setBodyContext(sBodyContext){
	    //본문 채우기
	    var m_objXML=CreateXmlDocument();
	    var elmList, elm;
	    var elmListLan;
	
	    m_objXML.loadXML("<?xml version='1.0' encoding='utf-8'?>"+getInfo("BODY_CONTEXT"));
	    try{
		    elmList = m_objXML.documentElement.childNodes;
		    for(var i=0; i < elmList.length; i++){
			    var elm = elmList[i];
			    innerHtmlData(elm.nodeName, elm.text);
		    }
		    //본문 채우기
		    //setdField();
	    }
	    catch(e){ }
    }

    //본문 XML로 구성
    function makeBodyContext(){
	    var sBodyContext="";	
	    //xml 구성 예제 : <body><item><name></name></item><item><name></name></item></body>
	    //sBodyContext="<body><item><name>첫번째</name></item><item><name>두번째</name></item></body>";

	    sBodyContext = "<BODY_CONTEXT>" + getFields(document.getElementById("mField")) + "</BODY_CONTEXT>";	
	    return sBodyContext;
    }

    /*** 폼데이터 XML문 만들기 ***/
    function getFields(Fields) {
        /*
        var sText = "";
        if(Fields!=null){
        var szId = Fields.id;
        sText+= makeCBFormXML("input", szId);
        sText+= makeCBFormXML("select", szId);
        sText+= makeCBFormXML("radio", szId);
        sText+= makeCBFormXML("textarea", szId);
        }	
        return sText;
        */
        var sText = "";
        if (Fields != null) {
            var szId = Fields.id;
            var unFiltered = document.getElementsByTagName('*');
            for (var i = 0; i < unFiltered.length; i++) {

                if (unFiltered[i].getAttribute('id') == szId) {
                    if (unFiltered[i].getAttribute("name").indexOf("SEL_") > -1) {
                        sText += getSelRadio(unFiltered[i]);
                    } else if (unFiltered[i].getAttribute("name").indexOf("OPT_") > -1) {
                        if (sText.indexOf("<" + unFiltered[i].name + ">") == -1) sText += getRadio(unFiltered[i].name);
                    } else if (unFiltered[i].getAttribute("name").indexOf("CHK_") > -1) {
                        sText += getChkRadio(unFiltered[i].name);
                    } else {
                        sText += makeNode(unFiltered[i].getAttribute("name"), unFiltered[i].value);
                    }
                }
            }
        }
        return sText;
    }	

    /** 레디오버튼 XML노드 생성 **/
    function getRadio(radioNm){
        var radioVal = "";
        /*
	    //alert("이름:"+radioNm+"\n객체여부:"+eval(radioNm)+"\n길이:"+eval(radioNm).length+"\n체크여부:"+eval(radioNm).checked);
	    for(i=0;i<eval(radioNm).length;i++){				
		    if(eval(radioNm)[i].checked){
			    radioVal = makeNode(radioNm, eval(radioNm)[i].value);
		    }
	    }
        */
        radioVal = makeNode(radioNm, $("input:radio[name=" + radioNm + "]:checked").val());

	    return radioVal;
    }

    /** 체크박스 XML노드 생성 **/
    function getChkRadio(chkBoxNm) {
        /*
	    if(eval(radioNm).checked){
		    radioVal = makeNode(radioNm, eval(radioNm).value);
		    return radioVal;
	    }
        */
        var chkVal = "";
        if ($("input:checkbox[name=" + chkBoxNm + "]").is(":checked"))
            chkVal = makeNode(chkBoxNm, $("input:checkbox[name=" + chkBoxNm + "]:checked").val());

        return chkVal;
    }

    /** SELECT BOX VALUE 가져오기 **/
    function getSelRadio(obj){ //selNm
	    var radioVal = "";
	    var selNm = obj.getAttribute("name");
        if ( obj.selectedIndex > -1 ){
            radioVal += makeNode(selNm, obj.options[obj.selectedIndex].value);
            radioVal += makeNode(selNm+"_TEXT", obj.options[obj.selectedIndex].text);
        }else{
            radioVal += makeNode(selNm, "");
            radioVal += makeNode(selNm+"_TEXT", "");
        }
        return   radioVal;  
    }
    /*** 데이터 뿌려주기 ***/
    function innerHtmlData(nodeNm, nodeVal){
	    if (document.getElementsByName(nodeNm) != undefined) {
		    if (nodeNm.indexOf("FORM_ATTACH") != -1) {
			    setForm_Attach(nodeVal);
			    document.getElementsByName(nodeNm)[0].value = nodeVal;
		    } else if (nodeNm.indexOf("tbContentElement") != -1) {
			    var dom = tbContentElement.getDom();	dom.body.innerHTML= nodeVal.replace(/<BR>/gi,"");
		    } else if(nodeNm.indexOf("OPT") != -1) {
			    setRadio(nodeNm, nodeVal);
		    } else if(nodeNm.indexOf("CHK") != -1) {
			    setChk(nodeNm, nodeVal);
		    } else if(nodeNm.indexOf("JEONKEUL") != -1) {
		        spnJEONKEUL.innerHTML = nodeVal;
		    } else {
			    if(document.getElementsByName(nodeNm)[0]!=null) document.getElementsByName(nodeNm)[0].value = nodeVal;
		    }
	    }
    }

    /*** 레디오버튼 체크선택 (수정모드시) ***/
    function setRadio(szname, szvalue) {	
        /*
	    var objrdo = eval(szname);
	    for(i=0;i<objrdo.length;i++){	
		    if(objrdo[i].value == szvalue) objrdo[i].checked = true;
		}
        */
        var objrdo = $("[name=" + szname + "]");
		for (i = 0; i < objrdo.length; i++) {
		    if (objrdo[i].value == szvalue) 
                objrdo[i].checked = true;
		}
    }

    /*** 체크박스 체크선택 (수정모드시) ***/
    function setChk(szname, szvalue){
        /*
        var objrdo = eval(szname);
        if (objrdo.value == szvalue) objrdo.checked = true;
        */
        var objrdo = $("input:checkbox[name=" + szname + "]");
	    if (objrdo[0].value == szvalue)
	        objrdo[0].checked = true;
    }

    //편집모드시 날짜필드 셋팅 (HIW)
    function SetDateField() {

        for (var i = 1; i <= 10; i++) {
            $("#dpApprFormDTStart" + i).val($("input[name=hdn_dpApprFormDTStart" + i + "]").val()); 
        }
    }

    //편집모드시 콤보박스 셋팅 (HIW)
    function SetComboBox() {

        for (var i = 1; i <= 10; i++) {
            $("select[name=cmbGoobun" + i + "]").val($("input[name=hdnGoobunVal" + i + "]").val());
        }
    }

    //행데이터 초기화 (2012-12-07 HIW)
    function ResetRowData(pNo) {
        $("#dpApprFormDTStart" + pNo).val("");
        $("input[name=hdn_dpApprFormDTStart" + pNo + "]").val("");
        $("input[name=txtApplyDay" + pNo + "]").val("");
        setApplyDaySum();
    }

    //사용자기본정보 셋팅
    function SetUserBasicInfo() {
            
        var vSabun = "";
        var url = "/CoviWeb/Approval/CallBack.aspx";
        var param = "CODE=60&PERSON_CODE=" + getInfo("usid") + "&LANGUAGE=" + getInfo("uslng");

        var xml = DoCallback(url, param);
        var result = xml.responseXML;

        var elmRoot = result.documentElement;
        //debugger;
        if (SelectSingleNode(elmRoot, "result") != "SUCEESS") {
            alert("[Error]\n\r\n\r" + SelectSingleNode(elmRoot, "result"));
            return;
        }
        else {//debugger;

            var vUserNm = "";
            var vJobPosition = "";
            var vUnitNm = "";

            try {
                $(elmRoot).find("Table").each(function (i) {

                    vSabun = $(this).find("SABUN").text();
                    vUserNm = $(this).find("DISPLAY_NAME").text();
                    vJobPosition = $(this).find("JBO_POSITION").text();
                    vUnitNm = $(this).find("UNIT_NAME").text();
                });

                $("input[name=txtSabun]").val(vSabun);
                $("input[name=txtUserName]").val(vUserNm);
                $("input[name=txtJobPosition]").val(vJobPosition);
                $("input[name=txtUnitName]").val(vUnitNm);

            } catch (e) {
                alert(e.message);
            }
        }

        //================================
    }

    function GetVacatKind() {

        var vOptionStr = "";
        //2016-07-14 이수건설 "연차"만 사용처리
		//2017-07-12 이수건설 오전반차, 오후반차 도입 사용처리
        if (getInfo("etid") != "ISU_CT") {
            vOptionStr += "<option value='101'>연차</option>";
            vOptionStr += "<option value='900'>오전반차</option>";
            vOptionStr += "<option value='901'>오후반차</option>";
            vOptionStr += "<option value='103'>월차</option>";
        } else {
            vOptionStr += "<option value='101'>연차</option>";
            vOptionStr += "<option value='900'>오전반차</option>";
            vOptionStr += "<option value='901'>오후반차</option>";
        }
		
		for (var i = 1; i <= 10; i++){
			$("select[name=cmbGoobun" + i + "]").append(vOptionStr);	
		}

    }

    //구분(휴가종류)콤보박스 변경시
    function ChangeGoobunCombo(pCombo) {
        //debugger;
        var vComboName = pCombo.name;
        var vNo = vComboName.replace("cmbGoobun","");

        var vSelVal  = $("select[name=" + vComboName + "]").val();
        var vSelText = $("select[name="+ vComboName + "] option:selected").text(); 

        if (vSelText == "선택하세요") {
            $("input[name=hdnGoobunVal" + vNo + "]").val("");
            $("input[name=hdnGoobunText" + vNo + "]").val("");
            
            $("#dpApprFormDTStart" + vNo).val("");
            $("input[name=hdn_dpApprFormDTStart" + vNo + "]").val("");

            $("input[name=txtApplyDay" + vNo + "]").val("");
        }
        else {
            $("input[name=hdnGoobunVal" + vNo + "]").val(vSelVal);
            $("input[name=hdnGoobunText" + vNo + "]").val(vSelText);
        }

        setApplyDay(vNo);
        setApplyDaySum();

    }
    
    //적용일 수 세팅
    function setApplyDay(vNo){

    	var idx = vNo - 1;

		if($("input[name=hdn_dpApprFormDTStart"+vNo+"]").val() == ""){
			return;
		}
		//if($("#dpApprFormDTStart"+vNo).val() == "") return;
    	//if($("input[name=dpApprFormDTCheck").eq(idx).val() == "") return;

    	if(!checkDupDay1(vNo)) return;
    	if(!checkDupDay2(vNo)) return;
 	
 		var vSelText = $("select[name=cmbGoobun"+ vNo + "] option:selected").text();
		try {
			
			if (vSelText == "오전반차" || vSelText == "오후반차"){
				$("input[name=txtApplyDay"+vNo+"]").val("0.5");
            } else if (vSelText == "연차" || vSelText == "월차") {
				$("input[name=txtApplyDay"+vNo+"]").val("1");
			}else{
				$("input[name=txtApplyDay"+vNo+"]").val("");
			}
			
			setApplyDaySum();
			
		} catch (e) {
			alert(e.message);
		}

    }


    //휴가 취소일 세팅
    function setCancelVacaDay(obj) {

        // Readonly 시 display 값 세팅
        var spaceStr = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
        var spaceStr2 = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
        var vCancelVaca = "";
        var vCancelVacaKey = "";
        var chkCnt = 0;

        $("input[name=chk_vaca_day]").each(function (i) {

            if (this.checked) {

                //읽기모드 시 화면 출력용
                var chkList = $(this).val().split(":");
                vCancelVaca += spaceStr + chkList[1] + "(" + chkList[4] + ")";

                if (chkList[2].indexOf("연차") > -1 || chkList[2].indexOf("월차") > -1) vCancelVaca += spaceStr2;

                var loop = (chkCnt++) + 1;
                if (loop > 0 && (loop % 3) == 0) vCancelVaca += "<br>";

                //편집 시 세팅하기위한 키값 조합
                vCancelVacaKey += $(this).val()+"^";
            }
        });

        var brIdx = vCancelVaca.length - 4;
        if (vCancelVaca.substring(brIdx) == "<br>")
            vCancelVaca = vCancelVaca.substring(0, brIdx);

        $("[name=hdn_cancel_vaca_day]").val(vCancelVaca);
        $("[name=hdn_cancel_vaca_day_key]").val(vCancelVacaKey);

    }

    
    //휴가 중복일 체크
    function checkDupDay1(vNo){
    	
    	var rtnFlag = true;
		var vSelText = $("select[name=cmbGoobun"+ vNo + "] option:selected").text();
		
		$("input[name=chk_vaca_day]").each( function(i){ 
			if( !this.checked ){
				var chkVal = $("input[name=hdn_dpApprFormDTStart"+vNo+"]").val();
				var trgVal = $("#chk_vaca_day"+(i+1)).val();

				if (vSelText == "연차" || vSelText == "월차") {
					if(trgVal.indexOf(chkVal) > -1){
						alert(chkVal+" 일은 이미 신청된 날짜입니다.");
						$("input[name=hdn_dpApprFormDTStart"+vNo+"]").focus();
						ResetRowData(vNo);
						rtnFlag = false;
						return false;
					}
				}else {
					if(trgVal.indexOf(chkVal) > -1 && (trgVal.indexOf("연차") > -1 || trgVal.indexOf("월차") > -1 || trgVal.indexOf(vSelText) > -1)){
						alert(chkVal+" 일은 이미 신청된 날짜입니다.");
						$("input[name=hdn_dpApprFormDTStart"+vNo+"]").focus();
						ResetRowData(vNo);
						rtnFlag = false;
						return false;
					}
				}
			}
        });
    	return rtnFlag;
    }
    
    //구분 선택 시 휴가 중복일 체크
    function checkDupDay2(vNo){
    	
    	var rtnFlag = true;
		var vSelText = $("select[name=cmbGoobun"+ vNo + "] option:selected").text();
		
		for(i = 1 ; i <= 10 ; i++){
			if( i != vNo){
				var chkVal = $("input[name=hdn_dpApprFormDTStart"+vNo+"]").val();
				var trgVal = $("input[name=hdn_dpApprFormDTStart"+i+"]").val();
					trgVal += $("select[name=cmbGoobun"+ i + "] option:selected").text();
					if (vSelText == "연차" || vSelText == "월차") {
					if(trgVal.indexOf(chkVal) > -1){
						alert(chkVal+" 일은 이미 신청된 날짜입니다.");
						$("input[name=hdn_dpApprFormDTStart"+vNo+"]").focus();
						ResetRowData(vNo);
						rtnFlag = false;
						return false;
					}
				}else {
                    if (trgVal.indexOf(chkVal) > -1 && (trgVal.indexOf("연차") > -1 || trgVal.indexOf("월차") > -1 || trgVal.indexOf(vSelText) > -1)) {
						alert(chkVal+" 일은 이미 신청된 날짜입니다.");
						$("input[name=hdn_dpApprFormDTStart"+vNo+"]").focus();
						ResetRowData(vNo);
						rtnFlag = false;
						return false;
					}
				}
			}	
        }
    	return rtnFlag;
    }
    
 
    
    //변경 총일수 세팅
    function setApplyDaySum(){
    	var tSum = 0;
    	for(i = 1 ; i <= 10 ; i++){
    		tmpVal = $.trim($("input[name=txtApplyDay"+i+"]").val());
    		if(!isNaN(tmpVal) && tmpVal.length != 0 ){
    			tSum += parseFloat($("input[name=txtApplyDay"+i+"]").val());
    		}
    	}
            $("#sp_applyday_sum").html(tSum);
            $("[name=sp_applyday_sum]").val(tSum);
    }

    //사용자검색 팝업창 띄우기
    function SearchUserFromHR() {

        //fnPopUpModal("/CoviWeb/Approval/Forms/Popup/UserSearchFromHR.aspx", 400, 380);
        fn_OpenDialog2("/CoviWeb/Approval/Forms/Popup/UserSearchFromHR.aspx?kind=VacaChgSubmit", "", 500, 390, "scroll");   //fix/scroll
    }

	function setVacaApplyDays(vNo){
		if(vNo == 0) vNo = 10;
		setApplyDay(vNo);
	}
	
	//적용 총일수 세팅
    function setCancelDaySum(obj){

		var tmpCnt = 0;

		if($(obj).is(":checked")){
		    if ($(obj).val().indexOf("연차") > -1 || $(obj).val().indexOf("월차") > -1) {
				tmpCnt = 1;
			}else{
				tmpCnt = 0.5;
			}
		}else{
            if ($(obj).val().indexOf("연차") > -1 || $(obj).val().indexOf("월차") > -1) {
				tmpCnt = -1;
			}else{
				tmpCnt = -0.5;
			}
		}
			
		var cdSum = parseFloat($.trim($("#cancel_tcnt").html()));
    	if(!isNaN(cdSum) && cdSum.length != 0 ){
    		cdSum += parseFloat(tmpCnt);
    	}else{
    		cdSum = tmpCnt;
    	}

        $("#cancel_tcnt").html(cdSum);
        $("[name=hdn_cancel_tcnt]").val(cdSum);
    	
    }

</script>
</body>
</html>
